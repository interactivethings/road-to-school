<!DOCTYPE html>
<meta charset="utf-8">
<style>
body { 
  margin: 0; 
}
svg 
{
  position: absolute;
  top: 0;
  left: 0;
}
rect { 
  fill: transparent; 
}
</style>
<body>
  <div id="canvas"></div>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>

  /* Configuration
  ----------------------------------------------- */
  var n = 1000;
  var config = {};
  config.width = 1080;
  config.height = 500;
  config.canvas = d3.select('#canvas')
    .append('canvas')
    .attr('id', "canvasDynamic")
    .attr('width', config.width)
    .attr('height', config.height)
    .node().getContext('2d');

  config.svg = d3.select('body')
    .append('svg')
      .attr('width', config.width )
      .attr('height', config.height + 100)
      .append('g');

  config.svg.append('rect')
  .attr('class', 'overlay')
  .attr('width', config.width)
  .attr('height', config.height);


  

  /* Actions
  ----------------------------------------------- */
  var actions = {
    move: function(data) {
      return d3.forceSimulation(data)
        .alphaTarget(0.9)
        .velocityDecay(0.5)
        .force("Y", d3.forceY().strength(-0.07));
    },

    freeze: function(data) {

    },
    onHover: function(data) {

    },

    onClick: function(data) {

    }
  };

  /* Data initialization
  ----------------------------------------------- */
  var data = d3.range(n).map(function() 
  {
    var x = config.width * Math.random(),
        y =  10*Math.random();
    return { 
      x: x, 
      y: y,
      vx: 0.1,
      vy: 0.1,
      moredata: {
        type: Math.floor(Math.random() + 0.5),
        text: "story of a student!",
        age: 0,
        country: "Syria"
      }
    }
  })


  /* Render
  ----------------------------------------------- */
  function render(data, action, config) { 
    console.log(action(data))
    // Components
    // Layers


    // Rendering

    for (var i = 0, node; i < data.length; ++i) {
      node = data[i];
      config.canvas.beginPath();
      config.canvas.arc(node.x,node.y, 3, 0, 2*Math.PI);
      config.canvas.fillStyle = '#3B6C73';
      config.canvas.fill();
    }

  }

  /* Clock
  ----------------------------------------------- */

  //render data that stay


  //render data that move
  setInterval(render(data, actions.move, config), 1000);

  /* Helper functions
  ----------------------------------------------- */

  </script>
</body>