<!DOCTYPE html>
<meta charset="utf-8">
<style>
body { 
  margin: 0; 
}
svg 
{
  position: absolute;
  top: 0;
  left: 0;
}
rect { 
  fill: transparent; 
}
</style>
<body>
  <div id="canvas"></div>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>

  /* Configuration
  ----------------------------------------------- */
  var map = {};
  map.width = 1080;
  map.height = 500;
  var n = 1000;


  /* Application state
  ----------------------------------------------- */


  /* State transitions
  ----------------------------------------------- */
  var actions = {
    onHover: function(data) {

    },

    onClick: function(data) {

    }
  };

  /* Data initialization
  ----------------------------------------------- */
  var data = d3.range(n).map(function() 
  {
    var x = map.width * Math.random(),
        y =  10*Math.random();
    return { 
      x: x, 
      y: y,
      vx: 0.1,
      vy: 0.1,
      type: Math.floor(Math.random() + 0.5),
      text: "story of a student!"
    }
  })


  /* Render
  ----------------------------------------------- */
  function render(data, actions) { 

    // Layers
    map.canvas =
      d3.select('#canvas')
        .append('canvas')
        .attr('id', "canvasDynamic")
        .attr('width', map.width)
        .attr('height', map.height)
        .node().getContext('2d');

    map.svg =
      d3.select('body')
        .append('svg')
          .attr('width', map.width )
          .attr('height', map.height + 100)
          .append('g');

    map.svg.append('rect')
      .attr('class', 'overlay')
      .attr('width', map.width)
      .attr('height', map.height);

    // Components

    var simulation = d3.forceSimulation(data)
      .alphaTarget(0.9)
      .velocityDecay(0.5)
      .force("Y", d3.forceY().strength(-0.07));

    // Rendering

    for (var i = 0, node; i < data.length; ++i) {
      node = data[i];
      map.canvas.beginPath();
      map.canvas.arc(node.x,node.y, 3, 0, 2*Math.PI);
      map.canvas.fillStyle = '#3B6C73';
      map.canvas.fill();
    }


  }

  render(data, null);

  /* Helper functions
  ----------------------------------------------- */

  </script>
</body>