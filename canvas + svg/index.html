<!DOCTYPE html>
<meta charset="utf-8">
<style>

body { 
  margin: 0; 
}
svg 
{
  position: absolute;
  top: 0;
  left: 0;
}
rect { 
  fill: transparent; 
}

canvas {
  position: absolute;
}

button {
  margin: 600px 60px ;
}
</style>
<body>
  <div id="static"></div>
  <div id="moving"></div>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>
  var map = {};
  map.width = 1080;
  map.height = 500;
  var nStatic = 34;
  var nMoving = 66;

  map.canvasStatic =
    d3.select('#static')
      .append('canvas')
      .attr('id', "canvasStatic")
      .attr('width', map.width)
      .attr('height', map.height)
      .node().getContext('2d');

  map.canvasMoving =
    d3.select('#moving')
      .append('canvas')
      .attr('id', "canvasMoving")
      .attr('width', map.width)
      .attr('height', map.height)
      .node().getContext('2d');

  map.svg =
    d3.select('body')
      .append('svg')
        .attr('width', map.width)
        .attr('height', map.height)
        .append('g');

  map.svg.append('rect')
    .attr('class', 'overlay')
    .attr('width', map.width)
    .attr('height', map.height);


  map.canvasStatic.nodes = d3.range(nStatic).map(function() {
    var x = map.width * Math.random(),
        y =  40*Math.random();
    return { 
      x: x, 
      y: y 
    }
  });

  map.canvasMoving.nodes = d3.range(nMoving).map(function() {
    var x = map.width * Math.random(),
        y =  40*Math.random();
    return { 
      x: x, 
      y: y 
    }
  });

  var simulation = d3.forceSimulation(map.canvasMoving.nodes)
      .alphaTarget(0.4)
      .velocityDecay(0.5)
      // .force("charge", d3.forceManyBody().strength(0.1).distanceMax(1))
      .force("Y", d3.forceY().strength(-0.03))
      // .force("collide", d3.forceCollide().radius(0.9).strength(0.1))

  simulation.on("tick", draw);


  map.svg.append("text")
    .style("fill", "black")
    .style("font-family", "Helvetica Neue")
    .style("font-weight", "300")
    .style("font-size", "30")
    .style("text-anchor", "middle")
    .text("  syrian refugee children can't wait to go back to school tomorrow" )
    .attr("x", map.width/2)
    .attr("y", map.height - 100);

    map.svg.append("text")
    .attr("class","counter")
    .style("fill", "black")
    .style("font-family", "Helvetica Neue")
    .style("font-weight", "300")
    .style("font-size", "30")
    .style("text-anchor", "middle")
    // .text(counterReturn)
    .attr("x", map.width/2)
    .attr("y", map.height - 150);

  function draw() {
    map.canvasMoving.clearRect(0, 0, map.width, map.height);
    map.canvasStatic.clearRect(0, 0, map.width, map.height);
    map.svg.selectAll("text.counter").remove();

    for (var i = 0, node; i < nMoving; ++i) { //drawing all moving dots
      node = map.canvasMoving.nodes[i];
      if ( node.y > map.height )   //dots touch the bottom, send them back
      { 
        node.y = 0;
        node.x = node.x;
      }
      map.canvasMoving.beginPath();
      map.canvasMoving.arc(node.x,node.y, 5, 0, 2*Math.PI);
      map.canvasMoving.fillStyle = '#3B6C73';
      map.canvasMoving.fill();
    }

    for (var i = 0, node; i < nStatic; ++i) { //drawing all Static dots
      node = map.canvasStatic.nodes[i];
      map.canvasStatic.beginPath();
      map.canvasStatic.arc(node.x,node.y, 5, 0, 2*Math.PI);
      map.canvasMoving.fillStyle = '#000';
      map.canvasStatic.fill();
    }
  }


  function counterReturn() {
    return Math.floor(Math.random()*100);
  }

  </script>
</body>