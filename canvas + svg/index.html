<!DOCTYPE html>
<meta charset="utf-8">
<style>
body { 
  margin: 0; 
}
svg 
{
  position: absolute;
  top: 0;
  left: 0;
}
rect { 
  fill: transparent; 
}
</style>
<body>
  <div id="canvas"></div>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script>

  /* Configuration
  ----------------------------------------------- */
  var n = 1000;
  var config = {};
  config.width = 1080;
  config.height = 500;
  config.canvas = d3.select('#canvas')
    .append('canvas')
    .attr('id', "canvasDynamic")
    .attr('width', config.width)
    .attr('height', config.height)
    .node().getContext('2d');

  config.svg = d3.select('body')
    .append('svg')
      .attr('width', config.width )
      .attr('height', config.height + 100)
      .append('g');

  config.svg.append('rect')
  .attr('class', 'overlay')
  .attr('width', config.width)
  .attr('height', config.height);

  /* Application state
  ----------------------------------------------- */
  var state = {
    data: {}
  };


  /* actions
  ----------------------------------------------- */

  var actions = {
    initialize: function() {
      state.data = d3.range(n).map(function() 
      {
        return { 
          x: config.width * Math.random(), 
          y: 10*Math.random(),
          vx: 0,
          vy: 0,
          moredata: {
            type: Math.floor(Math.random() + 0.5),
            text: "story of a student!",
            age: 0,
            country: "Syria"
          }
        }
      })
    },
    move: function(data) {
      var simulation = d3.forceSimulation(data)
                        .alphaTarget(0.9)
                        .velocityDecay(0.5)
                        .force("Y", d3.forceY().strength(-0.07));
      
      simulation.on("tick", render(data, config));
    },

    freeze: function(data) {

    },
    onHover: function(data) {

    },

    onClick: function(data) {

    }
  };

  /* Render
  ----------------------------------------------- */
  function render(data, config) { 
    // Components
    // Layers
    // Rendering
    config.canvas.clearRect(0, 0, config.width, config.height);


    for (var i = 0, node; i < data.length; ++i) {
      node = data[i];
      config.canvas.beginPath();
      config.canvas.arc(node.x,node.y, 3, 0, 2*Math.PI);
      config.canvas.fillStyle = '#3B6C73';
      config.canvas.fill();
    }

  }


  /* Data initialization
  ----------------------------------------------- */
  actions.initialize();
  actions.move(state.data);


  </script>
</body>